diff -r -u /c/ftp/ffmpeg-1.1.3/configure /e/ffmpeg-1.1.3/configure
--- /c/ftp/ffmpeg-1.1.3/configure	2013-02-23 05:05:23 +0400
+++ /e/ffmpeg-1.1.3/configure	2013-03-12 04:38:08 +0400
@@ -1348,9 +1348,7 @@
     clock_gettime
     closesocket
     cmov
-    CommandLineToArgvW
     cpunop
-    CryptGenRandom
     dcbzl
     dev_bktr_ioctl_bt848_h
     dev_bktr_ioctl_meteor_h
@@ -1371,14 +1369,7 @@
     fork
     getaddrinfo
     gethrtime
-    getopt
-    GetProcessAffinityMask
-    GetProcessMemoryInfo
-    GetProcessTimes
-    GetSystemTimeAsFileTime
     getrusage
-    getservbyport
-    gettimeofday
     glob
     gnu_as
     ibm_asm
@@ -1399,12 +1390,10 @@
     machine_ioctl_meteor_h
     makeinfo
     malloc_h
-    MapViewOfFile
     memalign
     mkstemp
     mm_empty
     mmap
-    mprotect
     msvcrt
     nanosleep
     openjpeg_1_5_openjpeg_h
@@ -1419,7 +1408,6 @@
     sched_getaffinity
     sdl
     sdl_video_size
-    SetConsoleTextAttribute
     setmode
     setrlimit
     Sleep
@@ -1455,8 +1443,6 @@
     unistd_h
     usleep
     vfp_args
-    VirtualAlloc
-    windows_h
     winsock2_h
     xform_asm
     xmm_clobbers
Only in /e/ffmpeg-1.1.3/doc/examples: pc-uninstalled
Only in /e/ffmpeg-1.1.3/libavcodec: libavcodec.pc
diff -r -u /c/ftp/ffmpeg-1.1.3/libavcodec/utils.c /e/ffmpeg-1.1.3/libavcodec/utils.c
--- /c/ftp/ffmpeg-1.1.3/libavcodec/utils.c	2013-02-23 05:05:23 +0400
+++ /e/ffmpeg-1.1.3/libavcodec/utils.c	2013-03-14 03:19:38 +0400
@@ -2549,6 +2549,8 @@
 {
     AVHWAccel *hwaccel = NULL;

+    printf("%s id %d format %d\n", __FUNCTION__, codec_id, pix_fmt);
+
     while ((hwaccel = av_hwaccel_next(hwaccel)))
         if (hwaccel->id == codec_id
             && hwaccel->pix_fmt == pix_fmt)
diff -r -u /c/ftp/ffmpeg-1.1.3/libavcodec/vaapi_h264.c /e/ffmpeg-1.1.3/libavcodec/vaapi_h264.c
--- /c/ftp/ffmpeg-1.1.3/libavcodec/vaapi_h264.c	2013-02-23 05:05:17 +0400
+++ /e/ffmpeg-1.1.3/libavcodec/vaapi_h264.c	2013-03-14 04:46:14 +0400
@@ -341,7 +341,7 @@
     .name           = "h264_vaapi",
     .type           = AVMEDIA_TYPE_VIDEO,
     .id             = AV_CODEC_ID_H264,
-    .pix_fmt        = AV_PIX_FMT_VAAPI_VLD,
+    .pix_fmt        = AV_PIX_FMT_VAAPI_VLD, /* AV_PIX_FMT_YUV420P, */
     .start_frame    = start_frame,
     .end_frame      = end_frame,
     .decode_slice   = decode_slice,
Only in /e/ffmpeg-1.1.3/libavdevice: libavdevice.pc
Only in /e/ffmpeg-1.1.3/libavfilter: libavfilter.pc
diff -r -u /c/ftp/ffmpeg-1.1.3/libavformat/file.c /e/ffmpeg-1.1.3/libavformat/file.c
--- /c/ftp/ffmpeg-1.1.3/libavformat/file.c	2013-02-23 05:05:17 +0400
+++ /e/ffmpeg-1.1.3/libavformat/file.c	2013-07-12 17:59:02 +0400
@@ -23,9 +23,9 @@
 #include "libavutil/opt.h"
 #include "avformat.h"
 #include <fcntl.h>
-#if HAVE_IO_H
-#include <io.h>
-#endif
+//#if HAVE_IO_H
+//#include <io.h>
+//#endif
 #if HAVE_UNISTD_H
 #include <unistd.h>
 #endif
@@ -66,6 +66,7 @@
 static int file_read(URLContext *h, unsigned char *buf, int size)
 {
     FileContext *c = h->priv_data;
+
     int r = read(c->fd, buf, size);
     return (-1 == r)?AVERROR(errno):r;
 }
@@ -85,26 +86,15 @@

 static int file_check(URLContext *h, int mask)
 {
-#if HAVE_ACCESS && defined(R_OK)
-    int ret = 0;
-    if (access(h->filename, F_OK) < 0)
-        return AVERROR(errno);
-    if (mask&AVIO_FLAG_READ)
-        if (access(h->filename, R_OK) >= 0)
-            ret |= AVIO_FLAG_READ;
-    if (mask&AVIO_FLAG_WRITE)
-        if (access(h->filename, W_OK) >= 0)
-            ret |= AVIO_FLAG_WRITE;
-#else
-    struct stat st;
-    int ret = stat(h->filename, &st);
-    if (ret < 0)
-        return AVERROR(errno);
+//    struct stat st;
+//    int ret = stat(h->filename, &st);
+//    if (ret < 0)
+//        return AVERROR(errno);

-    ret |= st.st_mode&S_IRUSR ? mask&AVIO_FLAG_READ  : 0;
-    ret |= st.st_mode&S_IWUSR ? mask&AVIO_FLAG_WRITE : 0;
-#endif
-    return ret;
+//    ret |= st.st_mode&S_IRUSR ? mask&AVIO_FLAG_READ  : 0;
+//    ret |= st.st_mode&S_IWUSR ? mask&AVIO_FLAG_WRITE : 0;
+
+    return AVIO_FLAG_READ | AVIO_FLAG_WRITE ;
 }

 #if CONFIG_FILE_PROTOCOL
Only in /e/ffmpeg-1.1.3/libavformat: libavformat.pc
Only in /e/ffmpeg-1.1.3/libavutil: avconfig.h
diff -r -u /c/ftp/ffmpeg-1.1.3/libavutil/file.c /e/ffmpeg-1.1.3/libavutil/file.c
--- /c/ftp/ffmpeg-1.1.3/libavutil/file.c	2013-02-23 05:05:18 +0400
+++ /e/ffmpeg-1.1.3/libavutil/file.c	2013-03-09 17:03:58 +0400
@@ -25,13 +25,8 @@
 #if HAVE_UNISTD_H
 #include <unistd.h>
 #endif
-#if HAVE_IO_H
-#include <io.h>
-#endif
 #if HAVE_MMAP
 #include <sys/mman.h>
-#elif HAVE_MAPVIEWOFFILE
-#include <windows.h>
 #endif

 typedef struct {
Only in /e/ffmpeg-1.1.3/libavutil: libavutil.pc
diff -r -u /c/ftp/ffmpeg-1.1.3/libavutil/log.c /e/ffmpeg-1.1.3/libavutil/log.c
--- /c/ftp/ffmpeg-1.1.3/libavutil/log.c	2013-02-23 05:05:18 +0400
+++ /e/ffmpeg-1.1.3/libavutil/log.c	2013-03-09 17:05:54 +0400
@@ -29,9 +29,6 @@
 #if HAVE_UNISTD_H
 #include <unistd.h>
 #endif
-#if HAVE_IO_H
-#include <io.h>
-#endif
 #include <stdlib.h>
 #include "avutil.h"
 #include "common.h"
@@ -93,12 +90,13 @@
     [16+AV_CLASS_CATEGORY_SWRESAMPLER     ] = 147 << 8 | 0x14,
 };

-#define set_color(x)  fprintf(stderr, "\033[%d;3%dm", (color[x] >> 4) & 15, color[x] & 15)
-#define set_256color(x) fprintf(stderr, "\033[48;5;%dm\033[38;5;%dm", (color[x] >> 16) & 0xff, (color[x] >> 8) & 0xff)
-#define reset_color() fprintf(stderr, "\033[0m")
+#define set_color(x)
+#define set_256color(x)
+#define reset_color()
 #endif
 static int use_color = -1;

+#undef fprintf
 static void colored_fputs(int level, const char *str)
 {
     if (use_color < 0) {
@@ -113,14 +111,12 @@
             background = attr_orig & 0xF0;
         }
 #elif HAVE_ISATTY
-        use_color = !getenv("NO_COLOR") && !getenv("AV_LOG_FORCE_NOCOLOR") &&
-                    (getenv("TERM") && isatty(2) ||
-                     getenv("AV_LOG_FORCE_COLOR"));
-        if (getenv("AV_LOG_FORCE_256COLOR"))
-            use_color *= 256;
+//        use_color = !getenv("NO_COLOR") && !getenv("AV_LOG_FORCE_NOCOLOR") &&
+//                    (getenv("TERM") && isatty(2) ||
+//                     getenv("AV_LOG_FORCE_COLOR"));
 #else
-        use_color = getenv("AV_LOG_FORCE_COLOR") && !getenv("NO_COLOR") &&
-                   !getenv("AV_LOG_FORCE_NOCOLOR");
+//        use_color = getenv("AV_LOG_FORCE_COLOR") && !getenv("NO_COLOR") &&
+//                   !getenv("AV_LOG_FORCE_NOCOLOR");
 #endif
     }

@@ -214,11 +210,12 @@
     format_line(ptr, level, fmt, vl, part, sizeof(part[0]), &print_prefix, type);
     snprintf(line, sizeof(line), "%s%s%s", part[0], part[1], part[2]);

-#if HAVE_ISATTY
-    if (!is_atty)
-        is_atty = isatty(2) ? 1 : -1;
-#endif
+//#if HAVE_ISATTY
+//    if (!is_atty)
+//        is_atty = isatty(2) ? 1 : -1;
+//#endif

+#undef fprintf
     if (print_prefix && (flags & AV_LOG_SKIP_REPEATED) && !strcmp(line, prev)){
         count++;
         if (is_atty == 1)
diff -r -u /c/ftp/ffmpeg-1.1.3/libavutil/time.c /e/ffmpeg-1.1.3/libavutil/time.c
--- /c/ftp/ffmpeg-1.1.3/libavutil/time.c	2013-02-23 05:05:18 +0400
+++ /e/ffmpeg-1.1.3/libavutil/time.c	2013-03-09 17:18:54 +0400
@@ -55,16 +55,5 @@

 int av_usleep(unsigned usec)
 {
-#if HAVE_NANOSLEEP
-    struct timespec ts = { usec / 1000000, usec % 1000000 * 1000 };
-    while (nanosleep(&ts, &ts) < 0 && errno == EINTR);
-    return 0;
-#elif HAVE_USLEEP
-    return usleep(usec);
-#elif HAVE_SLEEP
-    Sleep(usec / 1000);
-    return 0;
-#else
     return AVERROR(ENOSYS);
-#endif
 }
